<div class="secondary-panel" 
     [class.open]="isOpen" 
     [class.far-right]="panelPosition === 'far-right'"
     [class.resizing]="isResizing"
     [style.width.px]="isOpen ? panelWidth : 0">
  
  <!-- Resize handle for next-to-sidebar position (right edge) -->
  <div class="resize-handle resize-handle-right" 
       *ngIf="isOpen && panelPosition === 'next-to-sidebar'"
       (mousedown)="onResizeStart($event)"
       title="Drag to resize panel">
  </div>
  
  <!-- Resize handle for far-right position (left edge) -->
  <div class="resize-handle resize-handle-left" 
       *ngIf="isOpen && panelPosition === 'far-right'"
       (mousedown)="onResizeStart($event)"
       title="Drag to resize panel">
  </div>
  <div class="panel-header">
    <div class="header-content">
      <h3 class="panel-title">
        <i class="pi pi-folder-open panel-icon"></i>
        {{ getMenuTitle() }}
      </h3>
      <div class="panel-controls">
        <button 
          class="position-toggle" 
          (click)="togglePosition()"
          title="Toggle position">
          <i class="pi pi-arrows-h"></i>
        </button>
        <button 
          class="close-button" 
          (click)="closePanel()"
          title="Close panel">
          <i class="pi pi-times"></i>
        </button>
      </div>
    </div>
  </div>
  
  <div class="panel-content" *ngIf="isOpen">
    <!-- Tab Content -->
    <div class="tab-content-container">
      <!-- Main Content Tab (Tree View) -->
      <div class="tab-content" [class.active]="activeTab === 'main'" *ngIf="shouldShowTabs()">
        <div class="tree-view">
          <ul class="tree-list">
            <li *ngFor="let item of getMenuContent()" class="tree-item">
              <div class="tree-node" [class.folder]="item.type === 'folder'">
                <i [class]="item.icon" class="tree-icon"></i>
                <span class="tree-label">{{ item.label }}</span>
                <i *ngIf="item.type === 'folder'" class="pi pi-chevron-right tree-chevron"></i>
              </div>
              
              <!-- Nested items (for demo purposes, showing as expanded) -->
              <ul *ngIf="item.children && item.type === 'folder'" class="tree-children">
                <li *ngFor="let child of item.children" class="tree-child-item">
                  <div class="tree-node child" (click)="onMenuItemClick(child)">
                    <i [class]="child.icon" class="tree-icon"></i>
                    <span class="tree-label">{{ child.label }}</span>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <!-- User Info Tab -->
      <div class="tab-content" [class.active]="activeTab === 'user-info'" *ngIf="shouldShowTabs()">
        <div class="tree-view">
          <ul class="tree-list">
            <li *ngFor="let item of getUserInfoContent()" class="tree-item">
              <div class="tree-node" [class.folder]="item.type === 'folder'">
                <i [class]="item.icon" class="tree-icon"></i>
                <span class="tree-label">{{ item.label }}</span>
                <i *ngIf="item.type === 'folder'" class="pi pi-chevron-right tree-chevron"></i>
              </div>
              
              <!-- Nested items -->
              <ul *ngIf="item.children && item.type === 'folder'" class="tree-children">
                <li *ngFor="let child of item.children" class="tree-child-item">
                  <div class="tree-node child" (click)="onMenuItemClick(child)">
                    <i [class]="child.icon" class="tree-icon"></i>
                    <span class="tree-label">{{ child.label }}</span>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <!-- Permission Tab -->
      <div class="tab-content" [class.active]="activeTab === 'permission'" *ngIf="shouldShowTabs()">
        <div class="tree-view">
          <ul class="tree-list">
            <li *ngFor="let item of getPermissionContent()" class="tree-item">
              <div class="tree-node" [class.folder]="item.type === 'folder'">
                <i [class]="item.icon" class="tree-icon"></i>
                <span class="tree-label">{{ item.label }}</span>
                <i *ngIf="item.type === 'folder'" class="pi pi-chevron-right tree-chevron"></i>
              </div>
              
              <!-- Nested items -->
              <ul *ngIf="item.children && item.type === 'folder'" class="tree-children">
                <li *ngFor="let child of item.children" class="tree-child-item">
                  <div class="tree-node child" (click)="onMenuItemClick(child)">
                    <i [class]="child.icon" class="tree-icon"></i>
                    <span class="tree-label">{{ child.label }}</span>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <!-- Non-tabbed content (when tabs are not shown) -->
      <div class="tab-content" [class.active]="!shouldShowTabs()">
        <div class="tree-view">
          <ul class="tree-list">
            <li *ngFor="let item of getMenuContent()" class="tree-item">
              <div class="tree-node" [class.folder]="item.type === 'folder'">
                <i [class]="item.icon" class="tree-icon"></i>
                <span class="tree-label">{{ item.label }}</span>
                <i *ngIf="item.type === 'folder'" class="pi pi-chevron-right tree-chevron"></i>
              </div>
              
              <!-- Nested items (for demo purposes, showing as expanded) -->
              <ul *ngIf="item.children && item.type === 'folder'" class="tree-children">
                <li *ngFor="let child of item.children" class="tree-child-item">
                  <div class="tree-node child" (click)="onMenuItemClick(child)">
                    <i [class]="child.icon" class="tree-icon"></i>
                    <span class="tree-label">{{ child.label }}</span>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Tab Navigation at bottom -->
    <div class="tab-navigation tab-navigation-bottom" *ngIf="shouldShowTabs()">
      <div class="tab-buttons">
        <button 
          *ngFor="let tab of getTabs()" 
          class="tab-button"
          [class.active]="activeTab === tab.id"
          (click)="setActiveTab(tab.id)">
          <i [class]="tab.icon"></i>
          {{ tab.label }}
        </button>
      </div>
    </div>
  </div>
</div>